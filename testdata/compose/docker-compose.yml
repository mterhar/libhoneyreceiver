services:
  refinery1:
    image: honeycombio/refinery:2.6.1
    environment:
      - OTEL_RESOURCE_ATTRIBUTES=cluster.name=docker-compose
      - REFINERY_QUERY_AUTH_TOKEN=IfYouWantToTestYourRulesSetThis
      - REFINERY_HONEYCOMB_API_KEY=someApiKey_for_refinery_logs_and_metrics
    ports:
      - 4317:4317
      - 8889:8080
    entrypoint:
      - "refinery"
    command:
      - "-c"
      - "/etc/refinery/config.yaml"
      - "-r"
      - "/etc/refinery/rules.yaml"
    volumes:
      - ./config.yaml:/etc/refinery/config.yaml
      - ./rules.yaml:/etc/refinery/rules.yaml
  redis:
    image: redis:6.2.5
    expose:
      - "6379"
